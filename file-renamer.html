---
layout: default
title: "File Renamer"
tagline: íŒŒì¼ëª… ì¼ê´„ ë³€ê²½ ì„œë¹„ìŠ¤
description: "ë©”íƒ€ ì´ë¯¸ì§€ ë©ìŠ¤ê°€ ì œê³µí•˜ëŠ” File Renamer ì„œë¹„ìŠ¤. íŒŒì¼ëª… ì¼ê´„ ë³€ê²½ì„ 100% ë¡œì»¬ì—ì„œ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬í•˜ì„¸ìš”. ê°„ë‹¨ ì—…ë¡œë“œë¡œ ìˆ˜ë°± ê°œ íŒŒì¼ëª…ì„ ì¼ê´„ ë³€ê²½í•˜ê³ , ZIP ë‹¤ìš´ë¡œë“œÂ·ê°œë³„
ì €ì¥ì„ ì§€ì›í•©ë‹ˆë‹¤. ê°œì¸ì •ë³´ ìœ ì¶œ ì—†ëŠ” ë¸Œë¼ìš°ì € ë‚´ ì²˜ë¦¬ë¡œ
ì•ˆì‹¬í•˜ê³  íŒŒì¼ëª… ì¼ê´„ ë³€ê²½ì„ ìˆ˜í–‰í•˜ì„¸ìš”."
keywords: "íŒŒì¼ëª… ë³€ê²½, íŒŒì¼ ì´ë¦„ ì¼ê´„ ë³€ê²½, ë„¤ì´ë²„í´ë¼ìš°ë“œ, íŒŒì¼ ê´€ë¦¬, íŒŒì¼ íˆ´, íŒŒì¼ ì •ë¦¬"
---


<style>
  /* ì´ í˜ì´ì§€ ì „ìš© ìŠ¤íƒ€ì¼: .frp-app ìŠ¤ì½”í”„ë¡œ ì „ì—­ê³¼ ì¶©ëŒ ë°©ì§€ */
  .frp-app {
    max-width: 800px;
    margin: 0 auto;
    background: #fff;
    border-radius: 20px;
    box-shadow: 0 20px 40px rgba(0, 0, 0, .1);
    overflow: hidden;
    animation: frpSlideIn .6s ease-out;
  }

  @keyframes frpSlideIn {
    from {
      opacity: 0;
      transform: translateY(30px) scale(.95);
    }

    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  .frp-app .header {
    padding: 30px;
    text-align: center;
    position: relative;
    background: linear-gradient(135deg, #f8f9ff 0%, #f0f2ff 100%);
  }

  .frp-app .icon {
    width: 64px;
    height: 64px;
    background: linear-gradient(135deg, #f6ab7a, #e6956a);
    border-radius: 16px;
    margin: 0 auto 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 8px 24px rgba(246, 171, 122, .4);
  }

  .frp-app .icon::before {
    content: "ğŸ“";
    font-size: 24px;
  }

  .frp-app h1 {
    margin: 0 0 8px;
    font-size: 2rem;
    font-weight: 800;
    color: #2d3748;
    letter-spacing: -.3px;
  }

  .frp-app .subtitle {
    color: #718096;
    font-size: .95rem;
    font-style: italic;
  }

  .frp-app .content {
    padding: 32px 30px 28px;
  }

  .frp-app .form-group {
    margin-bottom: 24px;
  }

  .frp-app .form-group label {
    display: block;
    font-weight: 700;
    color: #2d3748;
    margin-bottom: 12px;
    font-size: 1rem;
    text-transform: uppercase;
    letter-spacing: .5px;
  }

  .frp-app .input-wrapper {
    position: relative;
  }

  .frp-app input[type="text"] {
    width: 100%;
    padding: 15px 20px;
    border: 2px solid #e2e8f0;
    border-radius: 10px;
    font-size: 1rem;
    background: #fff;
    transition: .3s;
  }

  .frp-app input[type="text"]:focus {
    outline: none;
    border-color: #f6ab7a;
    box-shadow: 0 0 0 4px rgba(246, 171, 122, .1);
    transform: translateY(-1px);
  }

  .frp-app .pattern-buttons {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    margin-top: 12px;
    justify-content: center;
  }

  .frp-app .pattern-btn {
    background: rgba(246, 171, 122, .1);
    border: 1px solid #f6ab7a;
    color: #f6ab7a;
    padding: 8px 16px;
    border-radius: 8px;
    font-size: 14px;
    cursor: pointer;
    transition: .2s;
    font-weight: 500;
  }

  .frp-app .pattern-btn:hover {
    background: rgba(246, 171, 122, .2);
    transform: translateY(-1px);
  }

  .frp-app .pattern-btn.active {
    background: #f6ab7a;
    color: #fff;
  }

  .frp-app .file-input-wrapper {
    position: relative;
    border: 2px dashed #e2e8f0;
    border-radius: 15px;
    padding: 40px 20px;
    background: linear-gradient(135deg, #f8f9ff 0%, #f0f2ff 100%);
    transition: .3s;
    cursor: pointer;
    min-height: 140px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .frp-app .file-input-wrapper:hover {
    border-color: #f6ab7a;
    background: linear-gradient(135deg, #fff4f0 0%, #fef7f4 100%);
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(246, 171, 122, .15);
  }

  .frp-app .file-input-wrapper.dragover {
    border-color: #f6ab7a;
    background: rgba(246, 171, 122, .1);
    transform: scale(1.02);
  }

  .frp-app input[type="file"] {
    position: absolute;
    opacity: 0;
    width: 100%;
    height: 100%;
    cursor: pointer;
  }

  .frp-app .file-input-content {
    pointer-events: none;
    text-align: center;
  }

  .frp-app .file-input-text {
    font-size: 1.2rem;
    font-weight: 700;
    color: #2d3748;
    margin-bottom: 10px;
  }

  .frp-app .file-hint {
    color: #718096;
    font-size: .9rem;
  }

  .frp-app .preview-container {
    margin-top: 16px;
    display: none;
  }

  .frp-app .selected-files {
    background: rgba(246, 171, 122, .1);
    border-radius: 10px;
    padding: 15px;
    font-size: 1rem;
    color: #f6ab7a;
    font-weight: 700;
    margin-bottom: 15px;
    text-align: center;
    border: 2px solid #f6ab7a;
  }

  .frp-app .file-type-summary {
    background: rgba(72, 187, 120, .1);
    border-radius: 8px;
    padding: 8px 12px;
    font-size: 12px;
    color: #48bb78;
    margin-bottom: 12px;
    text-align: center;
  }

  .frp-app .preview-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
    gap: 15px;
    max-height: 200px;
    overflow-y: auto;
    padding: 20px;
    background: linear-gradient(135deg, #f8f9ff 0%, #f0f2ff 100%);
    border-radius: 15px;
    border: 2px solid #e1e5f2;
  }

  .frp-app .preview-item {
    position: relative;
    border-radius: 10px;
    overflow: hidden;
    aspect-ratio: 1;
    background: #f0f0f0;
    box-shadow: 0 6px 15px rgba(0, 0, 0, .2);
    transition: .3s;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    border: 2px solid #fff;
  }

  .frp-app .preview-item:hover {
    transform: scale(1.1) rotate(2deg);
    box-shadow: 0 10px 25px rgba(0, 0, 0, .3);
  }

  .frp-app .preview-item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .frp-app .file-icon {
    font-size: 24px;
    margin-bottom: 4px;
  }

  .frp-app .file-ext {
    font-size: 10px;
    font-weight: 600;
    color: #666;
    text-transform: uppercase;
  }

  .frp-app .filename {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: rgba(0, 0, 0, .7);
    color: #fff;
    font-size: 10px;
    padding: 2px 4px;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
  }

  .frp-app .filename-preview {
    background: rgba(72, 187, 120, .1);
    border: 2px solid #48bb78;
    border-radius: 10px;
    padding: 15px;
    margin-top: 15px;
    font-size: 1rem;
    color: #48bb78;
    display: none;
    text-align: center;
    font-weight: 700;
  }

  .frp-app .button-group {
    display: flex;
    gap: 16px;
    margin-top: 32px;
  }

  .frp-app .submit-button,
  .frp-app .individual-download-button {
    flex: 1;
    background: linear-gradient(135deg, #f6ab7a 0%, #e6956a 100%);
    color: #fff;
    border: 0;
    padding: 20px 30px;
    font-size: 1.1rem;
    font-weight: 800;
    border-radius: 15px;
    cursor: pointer;
    transition: .3s;
    text-transform: uppercase;
    letter-spacing: 1.2px;
    position: relative;
    overflow: hidden;
    text-shadow: 0 1px 2px rgba(0, 0, 0, .1);
  }

  .frp-app .individual-download-button {
    background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
  }

  .frp-app .submit-button::before,
  .frp-app .individual-download-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, .2), transparent);
    transition: left .5s ease;
  }

  .frp-app .submit-button:hover:not(:disabled),
  .frp-app .individual-download-button:hover:not(:disabled) {
    transform: translateY(-3px);
    box-shadow: 0 15px 35px rgba(0, 0, 0, .15);
  }

  .frp-app .submit-button:hover:not(:disabled)::before,
  .frp-app .individual-download-button:hover:not(:disabled)::before {
    left: 100%;
  }

  .frp-app .submit-button:disabled,
  .frp-app .individual-download-button:disabled {
    background: #cbd5e0;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
  }

  .frp-app .progress-container {
    margin-top: 24px;
    display: none;
    background: rgba(255, 255, 255, .8);
    padding: 20px;
    border-radius: 15px;
    border: 2px solid #e2e8f0;
  }

  .frp-app .progress-bar {
    width: 100%;
    height: 10px;
    background: #f1f1f1;
    border-radius: 5px;
    overflow: hidden;
    margin-bottom: 12px;
  }

  .frp-app .progress-fill {
    height: 100%;
    background: linear-gradient(135deg, #f6ab7a, #e6956a);
    width: 0%;
    transition: width .3s ease;
    border-radius: 5px;
  }

  .frp-app .progress-text {
    text-align: center;
    font-size: 1rem;
    color: #2d3748;
    margin-bottom: 12px;
    font-weight: 700;
  }

  /* ì ‘ê·¼ì„± */
  .frp-app *:focus-visible {
    outline: 2px solid #f6ab7a;
    outline-offset: 2px;
  }

  @media (max-width: 768px) {
    .frp-app {
      margin: 0 16px;
    }

    .frp-app h1 {
      font-size: 1.8rem;
    }

    .frp-app .icon {
      width: 56px;
      height: 56px;
    }

    .frp-app .icon::before {
      font-size: 20px;
    }

    .frp-app .content {
      padding: 25px 20px;
    }

    .frp-app .file-input-wrapper {
      padding: 32px 16px;
      min-height: 120px;
    }

    .frp-app .button-group {
      flex-direction: column;
    }

    .frp-app .submit-button,
    .frp-app .individual-download-button {
      font-size: 1rem;
      padding: 18px 24px;
    }
  }

  .sr-only {
    position: absolute !important;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }
</style>

<div class="frp-app">
  <div class="header">
    <div class="icon" aria-hidden="true"></div>
    <h1>
      íŒŒì¼ëª… ì¼ê´„ ë³€ê²½ê¸°
      <span class="sr-only">íŒŒì¼ëª… ì¼ê´„ ë³€ê²½</span>
    </h1>
    <div class="subtitle">í”„ë¼ì´ë²„ì‹œ ë³´ì¥! ëª¨ë“  íŒŒì¼ í˜•ì‹ ì§€ì›</div>
  </div>

  <div class="content">
    <!--  h2 #1: ë³¸ë¬¸ ì‹œì‘ -->
    <h2 class="sr-only">íŒŒì¼ëª… ì¼ê´„ ë³€ê²½ ì‚¬ìš© ì•ˆë‚´</h2>

    <form id="renameForm">
      <div class="form-group">
        <label for="prefix">íŒŒì¼ëª… ì…ë ¥</label>
        <div class="input-wrapper">
          <input type="text" id="prefix" placeholder="ì˜ˆ: ë¬¸ì„œ_" required>
        </div>
        <div class="pattern-buttons">
          <button type="button" class="pattern-btn" data-pattern="ë¬¸ì„œ_">ë¬¸ì„œ_</button>
          <button type="button" class="pattern-btn" data-pattern="ì‚¬ì§„_">ì‚¬ì§„_</button>
          <button type="button" class="pattern-btn" data-pattern="ìë£Œ_">ìë£Œ_</button>
          <button type="button" class="pattern-btn" data-pattern="backup_">backup_</button>
        </div>
      </div>

      <!--  h2 #2: íŒŒì¼ ì„ íƒ ì„¹ì…˜ ì‹œì‘ -->
      <h2 class="sr-only">íŒŒì¼ëª… ì¼ê´„ ë³€ê²½ íŒŒì¼ ì„ íƒ</h2>

      <div class="form-group">
        <label for="files">íŒŒì¼ ì„ íƒ</label>
        <div class="file-input-wrapper" role="button" tabindex="0">
          <input type="file" id="files" multiple>
          <div class="file-input-content">
            <div class="file-input-text">íŒŒì¼ì„ ì—¬ê¸°ì— ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì„ íƒ</div>
            <div class="file-hint">ëª¨ë“  íŒŒì¼ í˜•ì‹ ì§€ì› (ì´ë¯¸ì§€, ë¬¸ì„œ, ë™ì˜ìƒ, ì••ì¶•íŒŒì¼ ë“±)</div>
          </div>
        </div>

        <div class="preview-container" id="previewContainer">
          <div class="selected-files" id="selectedFiles"></div>
          <div class="file-type-summary" id="fileTypeSummary"></div>
          <div class="preview-grid" id="previewGrid"></div>
        </div>

        <div class="filename-preview" id="filenamePreview">
          <strong>ë³€ê²½ë  íŒŒì¼ëª… ì˜ˆì‹œ:</strong>
          <div id="previewText"></div>
        </div>
      </div>

      <!--  h2 #3: ë‹¤ìš´ë¡œë“œ ì•¡ì…˜ ì „ -->
      <h2 class="sr-only">íŒŒì¼ëª… ì¼ê´„ ë³€ê²½ ZIP ë‹¤ìš´ë¡œë“œì™€ ê°œë³„ ì €ì¥</h2>

      <div class="button-group">
        <button type="submit" class="submit-button" id="submitBtn">ZIP ë‹¤ìš´ë¡œë“œ</button>
        <button type="button" class="individual-download-button" id="individualBtn">ê°œë³„ íŒŒì¼ ë‹¤ìš´ë¡œë“œ</button>
      </div>

      <!--  h2 #4: ì§„í–‰ ìƒíƒœ -->
      <h2 class="sr-only">íŒŒì¼ëª… ì¼ê´„ ë³€ê²½ ì§„í–‰ ìƒíƒœ</h2>

      <div class="progress-container" id="progressContainer">
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>
        <div class="progress-text" id="progressText">íŒŒì¼ ì²˜ë¦¬ ì¤‘...</div>
      </div>
    </form>
  </div>
</div>

<!-- í•„ìš”í•œ ìŠ¤í¬ë¦½íŠ¸ (CDN) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

<script>
  // === ê¸°ì¡´ JS ê·¸ëŒ€ë¡œ (ì•½ê°„ë§Œ ì •ë¦¬) ===
  const form = document.getElementById('renameForm');
  const prefixInput = document.getElementById('prefix');
  const fileInput = document.getElementById('files');
  const previewGrid = document.getElementById('previewGrid');
  const previewContainer = document.getElementById('previewContainer');
  const selectedFiles = document.getElementById('selectedFiles');
  const fileTypeSummary = document.getElementById('fileTypeSummary');
  const filenamePreview = document.getElementById('filenamePreview');
  const previewText = document.getElementById('previewText');
  const submitBtn = document.getElementById('submitBtn');
  const individualBtn = document.getElementById('individualBtn');
  const progressContainer = document.getElementById('progressContainer');
  const progressFill = document.getElementById('progressFill');
  const progressText = document.getElementById('progressText');
  const fileWrapper = document.querySelector('.file-input-wrapper');

  let selectedFilesArray = [];

  function getFileIcon(filename) {
    const ext = filename.toLowerCase().split('.').pop();
    const iconMap = {
      jpg: 'ğŸ–¼ï¸', jpeg: 'ğŸ–¼ï¸', png: 'ğŸ–¼ï¸', gif: 'ğŸ–¼ï¸', bmp: 'ğŸ–¼ï¸', webp: 'ğŸ–¼ï¸', svg: 'ğŸ–¼ï¸', heic: 'ğŸ“±', heif: 'ğŸ“±',
      pdf: 'ğŸ“„', doc: 'ğŸ“', docx: 'ğŸ“', txt: 'ğŸ“„', rtf: 'ğŸ“„', odt: 'ğŸ“„',
      xls: 'ğŸ“Š', xlsx: 'ğŸ“Š', csv: 'ğŸ“Š', ods: 'ğŸ“Š',
      ppt: 'ğŸ“Š', pptx: 'ğŸ“Š', odp: 'ğŸ“Š',
      zip: 'ğŸ—œï¸', rar: 'ğŸ—œï¸', '7z': 'ğŸ—œï¸', tar: 'ğŸ—œï¸', gz: 'ğŸ—œï¸',
      mp4: 'ğŸ¬', avi: 'ğŸ¬', mkv: 'ğŸ¬', mov: 'ğŸ¬', wmv: 'ğŸ¬', flv: 'ğŸ¬', webm: 'ğŸ¬',
      mp3: 'ğŸµ', wav: 'ğŸµ', flac: 'ğŸµ', aac: 'ğŸµ', ogg: 'ğŸµ', m4a: 'ğŸµ',
      js: 'ğŸ’»', html: 'ğŸ’»', css: 'ğŸ’»', py: 'ğŸ’»', java: 'ğŸ’»', cpp: 'ğŸ’»', c: 'ğŸ’»', php: 'ğŸ’»', rb: 'ğŸ’»', go: 'ğŸ’»',
      ttf: 'ğŸ”¤', otf: 'ğŸ”¤', woff: 'ğŸ”¤', woff2: 'ğŸ”¤',
      exe: 'âš™ï¸', msi: 'âš™ï¸', dmg: 'âš™ï¸', deb: 'âš™ï¸', rpm: 'âš™ï¸'
    };
    return iconMap[ext] || 'ğŸ“„';
  }

  function getFileCategory(filename) {
    const ext = filename.toLowerCase().split('.').pop();
    const categories = {
      image: ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'webp', 'svg', 'heic', 'heif'],
      document: ['pdf', 'doc', 'docx', 'txt', 'rtf', 'odt', 'xls', 'xlsx', 'csv', 'ods', 'ppt', 'pptx', 'odp'],
      video: ['mp4', 'avi', 'mkv', 'mov', 'wmv', 'flv', 'webm'],
      audio: ['mp3', 'wav', 'flac', 'aac', 'ogg', 'm4a'],
      archive: ['zip', 'rar', '7z', 'tar', 'gz'],
      code: ['js', 'html', 'css', 'py', 'java', 'cpp', 'c', 'php', 'rb', 'go'],
      font: ['ttf', 'otf', 'woff', 'woff2'],
      executable: ['exe', 'msi', 'dmg', 'deb', 'rpm']
    };
    for (const [k, v] of Object.entries(categories)) if (v.includes(ext)) return k;
    return 'other';
  }

  document.querySelectorAll('.pattern-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('.pattern-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      prefixInput.value = btn.dataset.pattern;
      prefixInput.focus();
      updateFilenamePreview();
    });
  });

  function updateFilenamePreview() {
    if (!selectedFilesArray.length) { filenamePreview.style.display = 'none'; return; }
    const prefix = prefixInput.value;
    const examples = [];
    selectedFilesArray.slice(0, 3).forEach((file, i) => {
      let newName = prefix.endsWith('_') ? prefix.slice(0, -1) : prefix;
      const ext = file.name.split('.').pop();
      examples.push(`${newName}_${String(i + 1).padStart(3, '0')}.${ext}`);
    });
    if (selectedFilesArray.length > 3) examples.push(`... ì™¸ ${selectedFilesArray.length - 3}ê°œ`);
    previewText.innerHTML = examples.join('<br>');
    filenamePreview.style.display = 'block';
  }

  function updateFileTypeSummary(files) {
    const counts = {};
    for (const f of files) {
      const c = getFileCategory(f.name);
      counts[c] = (counts[c] || 0) + 1;
    }
    const names = { image: 'ì´ë¯¸ì§€', document: 'ë¬¸ì„œ', video: 'ë™ì˜ìƒ', audio: 'ì˜¤ë””ì˜¤', archive: 'ì••ì¶•íŒŒì¼', code: 'ì½”ë“œ', font: 'í°íŠ¸', executable: 'ì‹¤í–‰íŒŒì¼', other: 'ê¸°íƒ€' };
    fileTypeSummary.textContent = Object.entries(counts).map(([k, v]) => `${names[k]}: ${v}ê°œ`).join(' | ');
  }

  function createPreview(file) {
    return new Promise((resolve) => {
      const div = document.createElement('div');
      div.className = 'preview-item';
      const ext = file.name.toLowerCase().split('.').pop();
      const icon = getFileIcon(file.name);
      if (file.type.startsWith('image/') && !['heic', 'heif'].includes(ext)) {
        const reader = new FileReader();
        reader.onload = e => {
          div.innerHTML = `<img src="${e.target.result}" alt="${file.name}"><div class="filename">${file.name}</div>`;
          resolve(div);
        };
        reader.onerror = () => {
          div.innerHTML = `<div class="file-icon">${icon}</div><div class="file-ext">${ext}</div><div class="filename">${file.name}</div>`;
          resolve(div);
        };
        reader.readAsDataURL(file);
      } else {
        div.innerHTML = `<div class="file-icon">${icon}</div><div class="file-ext">${ext}</div><div class="filename">${file.name}</div>`;
        resolve(div);
      }
    });
  }

  async function updatePreview(files) {
    previewGrid.innerHTML = '';
    selectedFilesArray = Array.from(files);
    selectedFiles.textContent = `ì„ íƒëœ íŒŒì¼: ${files.length}ê°œ`;
    previewContainer.style.display = 'block';

    updateFileTypeSummary(selectedFilesArray);

    for (const file of selectedFilesArray.slice(0, 12)) {
      const el = await createPreview(file);
      previewGrid.appendChild(el);
    }
    if (files.length > 12) {
      const more = document.createElement('div');
      more.className = 'preview-item';
      more.innerHTML = `<div style="display:flex;align-items:center;justify-content:center;height:100%;background:#f0f0f0;color:#666;">+${files.length - 12}</div>`;
      previewGrid.appendChild(more);
    }
    updateFilenamePreview();
  }

  ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(evt => {
    fileWrapper.addEventListener(evt, e => { e.preventDefault(); e.stopPropagation(); });
  });
  ['dragenter', 'dragover'].forEach(evt => fileWrapper.addEventListener(evt, () => fileWrapper.classList.add('dragover')));
  ['dragleave', 'drop'].forEach(evt => fileWrapper.addEventListener(evt, () => fileWrapper.classList.remove('dragover')));

  fileWrapper.addEventListener('drop', e => {
    const files = Array.from(e.dataTransfer.files);
    if (files.length) {
      updatePreview(files);
      const dt = new DataTransfer();
      files.forEach(f => dt.items.add(f));
      fileInput.files = dt.files;
    }
  });

  fileInput.addEventListener('change', e => updatePreview(e.target.files));
  prefixInput.addEventListener('input', updateFilenamePreview);

  fileWrapper.addEventListener('keydown', e => {
    if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); fileInput.click(); }
  });

  async function downloadIndividualFiles() {
    const prefix = prefixInput.value.trim();
    const files = fileInput.files;
    if (!prefix || !files.length) { alert('ì ‘ë‘ì–´ì™€ íŒŒì¼ì„ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”.'); return; }
    individualBtn.disabled = true; submitBtn.disabled = true; individualBtn.textContent = 'ë‹¤ìš´ë¡œë“œ ì¤‘...'; progressContainer.style.display = 'block';
    try {
      let done = 0;
      for (let i = 0; i < files.length; i++) {
        const file = files[i];
        const ext = file.name.split('.').pop();
        const cleanPrefix = prefix.endsWith('_') ? prefix.slice(0, -1) : prefix;
        const filename = `${cleanPrefix}_${String(i + 1).padStart(3, '0')}.${ext}`;
        const blob = new Blob([file], { type: file.type });
        saveAs(blob, filename);
        done++;
        const pct = (done / files.length) * 100;
        progressFill.style.width = pct + '%';
        progressText.textContent = `íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì¤‘... ${Math.round(pct)}% (${done}/${files.length})`;
        await new Promise(r => setTimeout(r, 300));
      }
      progressText.textContent = `ì™„ë£Œ! ${files.length}ê°œ íŒŒì¼ì´ ì„±ê³µì ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.`;
    } catch (err) {
      console.error(err);
      alert('íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + err.message);
    } finally {
      setTimeout(() => {
        individualBtn.disabled = false; submitBtn.disabled = false; individualBtn.textContent = 'ê°œë³„ íŒŒì¼ ë‹¤ìš´ë¡œë“œ';
        progressContainer.style.display = 'none'; progressFill.style.width = '0%';
      }, 2000);
    }
  }
  individualBtn.addEventListener('click', downloadIndividualFiles);

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const prefix = prefixInput.value.trim();
    const files = fileInput.files;
    if (!prefix || !files.length) { alert('ì ‘ë‘ì–´ì™€ íŒŒì¼ì„ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”.'); return; }
    submitBtn.disabled = true; individualBtn.disabled = true; submitBtn.textContent = 'ì²˜ë¦¬ ì¤‘...'; progressContainer.style.display = 'block';
    try {
      const zip = new JSZip();
      let done = 0;
      for (let i = 0; i < files.length; i++) {
        const file = files[i];
        const ext = file.name.split('.').pop();
        const cleanPrefix = prefix.endsWith('_') ? prefix.slice(0, -1) : prefix;
        const filename = `${cleanPrefix}_${String(i + 1).padStart(3, '0')}.${ext}`;
        const buf = await file.arrayBuffer();
        zip.file(filename, buf);
        done++;
        const pct = (done / files.length) * 80;
        progressFill.style.width = pct + '%';
        progressText.textContent = `íŒŒì¼ ì²˜ë¦¬ ì¤‘... ${Math.round(pct)}% (${done}/${files.length})`;
        await new Promise(r => setTimeout(r, 40));
      }
      progressText.textContent = 'ZIP íŒŒì¼ ìƒì„± ì¤‘...'; progressFill.style.width = '90%';
      const zipBlob = await zip.generateAsync({ type: 'blob', compression: 'DEFLATE', compressionOptions: { level: 6 } });
      progressText.textContent = 'ë‹¤ìš´ë¡œë“œ ì¤€ë¹„ ì¤‘...'; progressFill.style.width = '100%';
      const cleanPrefix = prefix.endsWith('_') ? prefix.slice(0, -1) : prefix;
      saveAs(zipBlob, `${cleanPrefix}_files.zip`);
      setTimeout(() => {
        progressText.textContent = `ì™„ë£Œ! ${files.length}ê°œ íŒŒì¼ì´ ì„±ê³µì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.`;
        setTimeout(() => {
          submitBtn.disabled = false; individualBtn.disabled = false; submitBtn.textContent = 'ZIP ë‹¤ìš´ë¡œë“œ'; progressContainer.style.display = 'none'; progressFill.style.width = '0%';
        }, 1500);
      }, 400);
    } catch (err) {
      console.error(err);
      alert('íŒŒì¼ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + err.message);
      submitBtn.disabled = false; individualBtn.disabled = false; submitBtn.textContent = 'ZIP ë‹¤ìš´ë¡œë“œ'; progressContainer.style.display = 'none'; progressFill.style.width = '0%';
    }
  });

  prefixInput.addEventListener('focus', () => { prefixInput.parentElement.style.transform = 'translateY(-2px)'; });
  prefixInput.addEventListener('blur', () => { prefixInput.parentElement.style.transform = 'translateY(0)'; });
</script>